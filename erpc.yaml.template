logLevel: info

server:
  httpHostV4: "0.0.0.0"
  httpHostV6: "[::]"
  httpPort: 4000

metrics:
  enabled: true
  hostV4: "0.0.0.0"
  hostV6: "[::]"
  port: 4001

projects:
  - id: main

    upstreamDefaults:
      jsonRpc:
        supportsBatch: true
        batchMaxSize: 10
        batchMaxWait: 50ms
      failsafe:
        timeout:
          duration: 15s
        retry:
          maxAttempts: 2
          delay: 300ms
          jitter: 100ms
          backoffMaxDelay: 5s
          backoffFactor: 1.5
        circuitBreaker:
          failureThresholdCount: 160
          failureThresholdCapacity: 200
          halfOpenAfter: 5m
          successThresholdCount: 3
          successThresholdCapacity: 10

    upstreams:
      - id: public-repo
        endpoint: repository://evm-public-endpoints.erpc.cloud

      - id: alchemy-arbitrum
        group: fallback
        endpoint: ${ALCHEMY_ARBITRUM_URL}
        evm:
          chainId: 42161
        rateLimitBudget: alchemy-arbitrum

      - id: alchemy-base
        group: fallback
        endpoint: ${ALCHEMY_BASE_URL}
        evm:
          chainId: 8453
        rateLimitBudget: alchemy-base

      - id: alchemy-degen
        group: fallback
        endpoint: ${ALCHEMY_DEGEN_URL}
        evm:
          chainId: 666666666
        rateLimitBudget: alchemy-degen

    networks:
      - architecture: evm
        evm:
          chainId: 42161
        alias: arbitrum
        selectionPolicy:
          evalInterval: 1m

      - architecture: evm
        evm:
          chainId: 8453
        alias: base
        selectionPolicy:
          evalInterval: 1m

      - architecture: evm
        evm:
          chainId: 666666666
        alias: degen
        selectionPolicy:
          evalInterval: 1m

rateLimiters:
  budgets:
    - id: alchemy-arbitrum
      rules:
        - method: "*"
          maxCount: ${ALCHEMY_ARBITRUM_RPS}
          period: 1s

    - id: alchemy-base
      rules:
        - method: "*"
          maxCount: ${ALCHEMY_BASE_RPS}
          period: 1s

    - id: alchemy-degen
      rules:
        - method: "*"
          maxCount: ${ALCHEMY_DEGEN_RPS}
          period: 1s
